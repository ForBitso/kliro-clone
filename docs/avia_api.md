# API –ê–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤ (Bukhara Integration)

API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–≤–∏–∞–±–∏–ª–µ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Bukhara API.

## –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:8080/avia
```

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Bukhara API –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## Endpoints

### üîç –ü–æ–∏—Å–∫ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

#### –ü–æ–∏—Å–∫ –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤
```http
POST /avia/search
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "directions": [
    {
      "departure_airport": "TAS",
      "arrival_airport": "IST",
      "date": "2024-01-15"
    }
  ],
  "service_class": "E",
  "adults": 2,
  "children": 0,
  "infants": 0,
  "infants_with_seat": 0
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "result": {
    "offers": [
      {
        "id": "offer_id_123",
        "type": "AV",
        "price": {
          "amount": 1250000,
          "currency": "UZS"
        },
        "directions": [...]
      }
    ]
  },
  "message": "–ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ"
}
```

#### –°–ø–∏—Å–æ–∫ –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤
```http
GET /avia/airports
```

#### –ö–ª–∞—Å—Å—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
```http
GET /avia/service-classes
```

#### –¢–∏–ø—ã –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
```http
GET /avia/passenger-types
```

### ‚úàÔ∏è –û—Ñ—Ñ–µ—Ä—ã

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Ñ—Ñ–µ—Ä–µ
```http
GET /avia/offers/{offer_id}
```

#### –ü—Ä–∞–≤–∏–ª–∞ —Ç–∞—Ä–∏—Ñ–∞
```http
GET /avia/offers/{offer_id}/rules
```

### üé´ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```http
POST /avia/offers/{offer_id}/booking
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "payer_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "payer_email": "ivan@example.com",
  "payer_tel": "+998901234567",
  "passengers": [
    {
      "first_name": "–ò–≤–∞–Ω",
      "last_name": "–ò–≤–∞–Ω–æ–≤",
      "middle_name": "–ò–≤–∞–Ω–æ–≤–∏—á",
      "age": "adt",
      "birthdate": "1990-01-01",
      "gender": "M",
      "citizenship": "UZ",
      "tel": "+998901234567",
      "doc_type": "A",
      "doc_number": "AA1234567",
      "doc_expire": "2030-01-01"
    }
  ]
}
```

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
```http
GET /avia/booking/{booking_id}
```

#### –û–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```http
POST /avia/booking/{booking_id}/payment
```

#### –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```http
POST /avia/booking/{booking_id}/cancel
```

### üè• –°–∏—Å—Ç–µ–º–Ω—ã–µ

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```http
GET /avia/health
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–∏—Å–∫ —Ä–µ–π—Å–∞ –¢–∞—à–∫–µ–Ω—Ç-–°—Ç–∞–º–±—É–ª

```bash
curl -X POST http://localhost:8080/avia/search \
  -H "Content-Type: application/json" \
  -d '{
    "directions": [
      {
        "departure_airport": "TAS",
        "arrival_airport": "IST",
        "date": "2024-01-15"
      }
    ],
    "service_class": "E",
    "adults": 1,
    "children": 0,
    "infants": 0,
    "infants_with_seat": 0
  }'
```

### –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
curl -X POST http://localhost:8080/avia/offers/offer_id_123/booking \
  -H "Content-Type: application/json" \
  -d '{
    "payer_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "payer_email": "ivan@example.com",
    "payer_tel": "+998901234567",
    "passengers": [
      {
        "first_name": "–ò–≤–∞–Ω",
        "last_name": "–ò–≤–∞–Ω–æ–≤",
        "middle_name": "–ò–≤–∞–Ω–æ–≤–∏—á",
        "age": "adt",
        "birthdate": "1990-01-01",
        "gender": "M",
        "citizenship": "UZ",
        "tel": "+998901234567",
        "doc_type": "A",
        "doc_number": "AA1234567",
        "doc_expire": "2030-01-01"
      }
    ]
  }'
```

### –û–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
curl -X POST http://localhost:8080/avia/booking/booking_id_456/payment
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:

- `200` - –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `503` - –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º—É–º 9 –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –Ω–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–ª–∞–¥–µ–Ω—Ü–µ–≤ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∑—Ä–æ—Å–ª—ã—Ö
- –¢–æ–∫–µ–Ω Bukhara API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 28 –¥–Ω–µ–π
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ Bukhara API

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ª–æ–≥–∞–º —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ —á–µ—Ä–µ–∑ `/avia/health`. 